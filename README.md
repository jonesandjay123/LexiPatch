# LexiPatch (MVP)

é€™æ˜¯ä¸€å€‹ Android æ‡‰ç”¨ç¨‹å¼ï¼Œå°ˆç‚ºå­¸ç¿’è‹±æ–‡å–®å­—è¨­è¨ˆã€‚å®ƒåŒ…å«æ¡Œé¢å°å·¥å…· (Widget)ã€å–®å­—ç®¡ç† (Library)ã€ä»¥åŠé€é AI è‡ªå‹•ç”Ÿæˆå–®å­— (Paste) çš„åŠŸèƒ½ï¼Œä¸¦æ”¯æ´å³æ™‚ç™¼éŸ³ (TTS)ã€‚

## åŠŸèƒ½ç‰¹é» (Features)

1.  **æŒä¹…åŒ–å„²å­˜ (Local Persistence)**
    *   ä½¿ç”¨ JSON æª”æ¡ˆå„²å­˜åœ¨ App å…§éƒ¨ç©ºé–“ (`filesDir/vocab.json`)ã€‚
    *   è³‡æ–™æ¨¡å‹åŒ…å«ï¼šè‹±æ–‡ (English)ã€ä¸­æ–‡ (Chinese)ã€ç¸®å¯« (Abbreviation-Optional)ã€‚
    *   åˆæ¬¡åŸ·è¡Œæ™‚æœƒè‡ªå‹•è¼‰å…¥ 10 å€‹ç¯„ä¾‹å–®å­—ã€‚
    *   æ”¯æ´æ–°å¢ã€åˆªé™¤ã€èˆ‡ç€è¦½é€²åº¦è¨˜æ†¶ (SharedPreferences)ã€‚

2.  **æ¡Œé¢å°å·¥å…· (Widgets)**
    *   å°ºå¯¸ç‚º **2x1** (å–®å±¤é«˜åº¦)ã€‚
    *   **ä¸Šä¸€é /ä¸‹ä¸€é  (Prev/Next)**ï¼šå³æ™‚åˆ‡æ›å–®å­—ã€‚
    *   **é»æ“Šæ–‡å­—**ï¼šå¯ç›´æ¥é–‹å•Ÿ Appã€‚
    *   è‹¥ç„¡å–®å­—ï¼Œé¡¯ç¤ºæç¤ºè¨Šæ¯ã€‚

3.  **App ä»‹é¢ (UI)**
    *   **Library (å–®å­—åº«)**ï¼šåˆ—è¡¨é¡¯ç¤ºæ‰€æœ‰å–®å­—ï¼Œå³å´è¨­æœ‰å°å–‡å­åœ–ç¤ºã€‚
        *   **èªéŸ³æœ—è®€ (TTS)**ï¼šé»æ“Šå–‡å­åœ–ç¤ºï¼Œç³»çµ±æœƒæœ—è®€è‹±æ–‡å–®å­— (è‹¥æœ‰ç¸®å¯«ä¹Ÿæœƒè®€å‡º)ã€‚
        *   **æ–°å¢/åˆªé™¤**ï¼šå³ä¸‹è§’ + è™Ÿæ–°å¢ï¼Œé•·æŒ‰åˆ—è¡¨é …ç›®åˆªé™¤ã€‚
    *   **Paste (AI ç”Ÿæˆ)**ï¼šè²¼ä¸Šè‹±æ–‡æ–‡ç« ï¼Œé€é LLM è‡ªå‹•æå–é‡é»å–®å­—ã€‚
    *   **Review (å¯©æ ¸)**ï¼šå‹¾é¸ AI ç”Ÿæˆçš„å–®å­—ï¼Œä¸€éµåŠ å…¥å–®å­—åº«ã€‚
    *   **å®‰å…¨å€åŸŸ (Safe Area)**ï¼šå·²é©é…ç³»çµ±ç‹€æ…‹åˆ— (Status Bar) é«˜åº¦ï¼Œç¢ºä¿å…§å®¹ä¸æœƒè¢«ç€æµ·æˆ–ç›¸æ©Ÿå­”é®æ“‹ã€‚

## å¦‚ä½•è¨­å®š Gemini API Key

æœ¬å°ˆæ¡ˆä½¿ç”¨ Google Gemini API é€²è¡Œ AI å–®å­—ç”Ÿæˆã€‚
åœ¨ **Paste** é é¢ä¸­ï¼Œæœ‰ä¸€å€‹æ¬„ä½è¼¸å…¥æ‚¨çš„ API Keyã€‚
*   å–å¾— API Keyï¼šè«‹è‡³ [Google AI Studio](https://aistudio.google.com/) ç”³è«‹ã€‚
*   ç‚ºäº†ç°¡åŒ– MVPï¼ŒKey æ˜¯ç›´æ¥åœ¨è¼¸å…¥æ¡†è¼¸å…¥ã€‚

## æ“ä½œæŒ‡å— (Run Instructions)

### 1. åŸ·è¡Œå°ˆæ¡ˆ
*   åœ¨ Android Studio ä¸­é–‹å•Ÿå°ˆæ¡ˆã€‚
*   é»æ“Š **Run** (ç¶ è‰²ä¸‰è§’å½¢)ã€‚
*   æ”¯æ´ Android 11 (API 30) ä»¥ä¸Šç‰ˆæœ¬ã€‚

### 2. ä½¿ç”¨ Library (å–®å­—åº«) & TTS
*   **é¦–é  (Library)** æœƒé¡¯ç¤ºç›®å‰çš„å–®å­—ã€‚
*   **æœ—è®€å–®å­—**ï¼šé»æ“Šåˆ—è¡¨é …ç›®å³å´çš„ **ğŸ”ˆ å–‡å­åœ–ç¤º**ã€‚
*   **æ–°å¢å–®å­—**ï¼šé»æ“Šå³ä¸‹è§’ **+** æŒ‰éˆ•ã€‚
*   **åˆªé™¤å–®å­—**ï¼šé•·æŒ‰åˆ—è¡¨é …ç›®ã€‚

### 3. ä½¿ç”¨ Widget (å°å·¥å…·)
*   å›åˆ°æ‰‹æ©Ÿæ¡Œé¢ï¼Œé•·æŒ‰ç©ºç™½è™• -> é¸æ“‡ **Widgets** -> **LexiPatch**ã€‚
*   å»ºè­°ä½¿ç”¨ 2x1 å°ºå¯¸ã€‚
*   è©¦æŒ‰ Next/Prev ç¢ºä¿å–®å­—åˆ‡æ›é †æš¢ã€‚

### 4. ä½¿ç”¨ AI ç”Ÿæˆ (Paste & Generate)
*   åˆ‡æ›åˆ° **Paste** åˆ†é ã€‚
*   åœ¨ä¸Šæ–¹è¼¸å…¥æ¡†è²¼ä¸Šä¸€æ®µè‹±æ–‡æ–‡ç« ã€‚
*   åœ¨ä¸‹æ–¹è¼¸å…¥æ¡†è²¼ä¸Šæ‚¨çš„ **Gemini API Key**ã€‚
*   é»æ“Š **Generate Words**ã€‚
*   ç­‰å¾…æ•¸ç§’ï¼ŒæˆåŠŸå¾Œæœƒè·³è½‰è‡³ **Review** é é¢ã€‚
*   å‹¾é¸æ‚¨æƒ³è¦çš„å–®å­—ï¼Œé»æ“Š **Add Selected**ã€‚
*   å›åˆ° Libraryï¼Œæ‚¨æœƒçœ‹åˆ°æ–°å–®å­—å·²åŠ å…¥ã€‚

## æŠ€è¡“å¯¦ä½œ (Implementation Detail)

*   **UI Insets / Safe Area**: ä½¿ç”¨ `enableEdgeToEdge()` èˆ‡ `ViewCompat.setOnApplyWindowInsetsListener` é€²è¡Œç³»çµ±é‚Šè·é©é…ï¼Œç¢ºä¿åœ¨å„é¡è¢å¹•ä¸Šé¡¯ç¤ºæ­£å¸¸ã€‚
*   **Text-To-Speech (TTS)**: ä½¿ç”¨ Android åŸç”Ÿ `TextToSpeech` å¼•æ“ï¼Œå°è£æ–¼ `TTSHelper` é¡åˆ¥ä¸­ï¼Œè‡ªå‹•è™•ç†åˆå§‹åŒ–èˆ‡é‡‹æ”¾è³‡æºã€‚
*   **JSON Persistence**: ä½¿ç”¨ `Gson` åº«å°‡ `List<VocabItem>` åºåˆ—åŒ–ç‚º JSON å­—ä¸²ä¸¦å¯«å…¥æª”æ¡ˆã€‚
*   **Widget Synchronization**: ä½¿ç”¨ `Context.filesDir` å…±ç”¨æª”æ¡ˆè®€å–ï¼Œä¸¦é€é Broadcast é€šçŸ¥ Widget æ›´æ–°ã€‚
*   **Gemini API**: ä½¿ç”¨ `HttpURLConnection` ç™¼é€ REST POST è«‹æ±‚åˆ° Google Generative Language APIã€‚
